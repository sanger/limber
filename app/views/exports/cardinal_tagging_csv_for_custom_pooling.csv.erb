<%
  csv_array = [['Source Well', 'Volume to add to pool', 'Dest. pool', 'Number of samples', 'Tag index', 'Tag 2 index']]
  @plate.wells_in_columns.each do |well|
    csv_array << [
      "#{@plate.human_barcode}:#{well.location}",
      nil,
      nil,
      rand(12) + 1, # TODO: DPL-067 Determine actual number of samples per well
      well.aliquots[0].tag_index,
      well.aliquots[0].tag2_index
    ] unless well.empty? || well.aliquots.size > 1 # TODO: DPL-067 Verify the assumption that a well only has one aliquot
  end
%>
<%= csv_array.map(&:to_csv).join %>